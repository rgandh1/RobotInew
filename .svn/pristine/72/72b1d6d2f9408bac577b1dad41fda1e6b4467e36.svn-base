[2015-06-30 09:56:27,109][FINEST][387][   SubscriberPeerImpl.getSubscriberProfileByImsi()] Reading subscriber profile by IMSI [imsi=530052041010000]
[2015-06-30 09:56:27,343][FINEST][387][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=42,539,077]
[2015-06-30 09:56:27,343][FINEST][387][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=42,539,077, msisdn=642041010000]
[2015-06-30 09:56:27,343][FINEST][387][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=42,539,077]
[2015-06-30 09:56:27,345][FINEST][387][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=42,539,077 msisdn=642041010000 imsi=530052041010000]
[2015-06-30 09:56:27,437][  INFO][287][                     TraceInterceptorImpl.invoke()] reserve(SessionReservationRequest [header=[sessionId=5065700000, sessionBeginTimeStamp=Tue Jun 30 09:56:26 UTC 2015, chargingType=REGULAR], trafficType=MTC, imsi=530052041010000, subscriberId=42539077, suppressNumber=false, startTime=Tue Jun 30 09:56:27 UTC 2015, duration=0, location=64278, roaming=false, bearerType=Voice, referenceNumber=0001ABFF0E, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], locationNumber=null, locationDetailedId=null])
[2015-06-30 09:56:27,594][FINEST][287][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=42,539,077]
[2015-06-30 09:56:27,594][FINEST][287][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=42,539,077, msisdn=642041010000]
[2015-06-30 09:56:27,594][FINEST][287][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=42,539,077]
[2015-06-30 09:56:27,595][FINEST][287][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-06-30 09:56:27,793][  FINE][287][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-06-30 09:56:27,799][FINEST][287][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=create execTime=5.114]
[2015-06-30 09:56:27,800][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Create]
[2015-06-30 09:56:27,801][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=CreateSession]
[2015-06-30 09:56:27,804][FINEST][287][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=2.582]
[2015-06-30 09:56:27,805][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-06-30 09:56:27,805][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-06-30 09:56:27,806][FINEST][287][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-06-30 09:56:27,806][ FINER][287][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/mtc
[2015-06-30 09:56:27,807][FINEST][287][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=42,539,077, reservation=InternalReservationImpl{id='R42539077T1435658907807@16922378778883654~-6132750299793771762', subscriberId=42539077, expires=1435658907807, reservedAt=1435658187807, reservation=[]}]
[2015-06-30 09:56:27,807][FINEST][287][                             SessionRater.<init>()] Initialized session rater [subscriberId=42,539,077, offset=1,435,658,187,421, duration=600,000]
[2015-06-30 09:56:27,808][FINEST][287][                             SessionRater.<init>()] Initialized session rater [subscriberId=42,539,077, offset=1,435,658,787,421, duration=600,000]
[2015-06-30 09:56:27,808][ FINER][287][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000002
[2015-06-30 09:56:27,808][ FINER][287][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,005]
[2015-06-30 09:56:27,808][FINEST][287][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-06-30 09:56:27,808][ FINER][287][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:27,809][ FINER][287][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:27,809][ FINER][287][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,005]
[2015-06-30 09:56:27,809][ FINER][287][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:27,810][FINEST][287][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=287]
[2015-06-30 09:56:27,810][FINEST][287][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=287]
[2015-06-30 09:56:27,811][FINEST][287][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=0.995]
[2015-06-30 09:56:27,811][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-06-30 09:56:27,811][FINEST][287][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=42539077, actionId=535105533]
[2015-06-30 09:56:27,815][FINEST][287][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=3.888]
[2015-06-30 09:56:27,816][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-06-30 09:56:27,817][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-06-30 09:56:27,819][FINEST][287][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=reserve execTime=381.875]
[2015-06-30 09:56:27,820][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Reserve]
[2015-06-30 09:56:27,821][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMTC]
[2015-06-30 09:56:27,821][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveInitial]
[2015-06-30 09:56:27,822][FINEST][287][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMTCInitial]
[2015-06-30 09:56:27,822][  INFO][287][                     TraceInterceptorImpl.invoke()] reserve(...): SessionReservationResponse [sessionId=5065700000, responseCode=OK, reservationId=R42539077T1435658907807@16922378778883654~-6132750299793771762, lastSegment=false, grantedTime=600000, accounts=[]] [385ms]
[2015-06-30 09:56:28,988][  INFO][301][                     TraceInterceptorImpl.invoke()] update(SessionUpdateReservationRequest [header=[sessionId=5065700000, sessionBeginTimeStamp=Tue Jun 30 09:56:26 UTC 2015, chargingType=REGULAR], reservationId=R42539077T1435658907807@16922378778883654~-6132750299793771762, trafficType=MTC, imsi=530052041010000, subscriberId=42539077, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], bearerType=Voice, startTime=Tue Jun 30 09:56:28 UTC 2015, duration=0, location=64278, roaming=false, referenceNumber=0001ABFF0E])
[2015-06-30 09:56:29,144][FINEST][301][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=42,539,077]
[2015-06-30 09:56:29,145][FINEST][301][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=42,539,077, msisdn=642041010000]
[2015-06-30 09:56:29,145][FINEST][301][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=42,539,077]
[2015-06-30 09:56:29,146][FINEST][301][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-06-30 09:56:29,426][  FINE][301][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-06-30 09:56:29,430][FINEST][301][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=3.609]
[2015-06-30 09:56:29,431][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-06-30 09:56:29,431][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-06-30 09:56:29,432][FINEST][301][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-06-30 09:56:29,432][ FINER][301][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/mtc
[2015-06-30 09:56:29,433][FINEST][301][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=42,539,077, reservation=InternalReservationImpl{id='R42539077T1435658909433@16922380404922163~-9048415148037454697', subscriberId=42539077, expires=1435658909433, reservedAt=1435658189433, reservation=[]}]
[2015-06-30 09:56:29,433][FINEST][301][                             SessionRater.<init>()] Initialized session rater [subscriberId=42,539,077, offset=1,435,658,188,092, duration=600,000]
[2015-06-30 09:56:29,434][FINEST][301][                             SessionRater.<init>()] Initialized session rater [subscriberId=42,539,077, offset=1,435,658,788,092, duration=600,000]
[2015-06-30 09:56:29,434][ FINER][301][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000002
[2015-06-30 09:56:29,434][ FINER][301][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,005]
[2015-06-30 09:56:29,434][FINEST][301][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-06-30 09:56:29,434][ FINER][301][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:29,435][ FINER][301][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:29,435][ FINER][301][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,005]
[2015-06-30 09:56:29,435][ FINER][301][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-06-30 09:56:29,436][FINEST][301][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=301]
[2015-06-30 09:56:29,436][FINEST][301][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=301]
[2015-06-30 09:56:29,437][FINEST][301][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=0.929]
[2015-06-30 09:56:29,437][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-06-30 09:56:29,437][FINEST][301][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=42539077, actionId=1911188972]
[2015-06-30 09:56:29,442][FINEST][301][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=4.239]
[2015-06-30 09:56:29,443][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-06-30 09:56:29,443][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-06-30 09:56:29,446][FINEST][301][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=update execTime=458.102]
[2015-06-30 09:56:29,446][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Update]
[2015-06-30 09:56:29,447][FINEST][301][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=UpdateMTC]
[2015-06-30 09:56:29,448][  INFO][301][                     TraceInterceptorImpl.invoke()] update(...): SessionReservationResponse [sessionId=5065700000, responseCode=OK, reservationId=R42539077T1435658909433@16922380404922163~-9048415148037454697, lastSegment=false, grantedTime=600000, accounts=[]] [459ms]
[2015-06-30 09:56:30,019][  INFO][302][                     TraceInterceptorImpl.invoke()] commit(SessionCommitRequest [header=[sessionId=5065700000, sessionBeginTimeStamp=Tue Jun 30 09:56:26 UTC 2015, chargingType=REGULAR], reservationId=R42539077T1435658909433@16922380404922163~-9048415148037454697, finalCommit=true, usedTime=36000])
[2015-06-30 09:56:30,024][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=3.782]
[2015-06-30 09:56:30,025][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-06-30 09:56:30,025][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-06-30 09:56:30,026][  FINE][302][                SessionCommitClosure.withContext()] try to commit reservation: R42539077T1435658909433@16922380404922163~-9048415148037454697
[2015-06-30 09:56:30,179][FINEST][302][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=42,539,077]
[2015-06-30 09:56:30,180][FINEST][302][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=42,539,077, msisdn=642041010000]
[2015-06-30 09:56:30,180][FINEST][302][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=42,539,077]
[2015-06-30 09:56:30,181][FINEST][302][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=302]
[2015-06-30 09:56:30,184][FINEST][302][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=302]
[2015-06-30 09:56:30,184][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.132]
[2015-06-30 09:56:30,185][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-06-30 09:56:30,185][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=3.8]
[2015-06-30 09:56:30,185][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-06-30 09:56:30,185][ FINER][302][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=42,539,078, subscriberId=42,539,077]
[2015-06-30 09:56:30,185][FINEST][302][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=42,539,077]
[2015-06-30 09:56:30,186][FINEST][302][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=302]
[2015-06-30 09:56:30,188][FINEST][302][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=302]
[2015-06-30 09:56:30,188][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.671]
[2015-06-30 09:56:30,189][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-06-30 09:56:30,189][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=3.285]
[2015-06-30 09:56:30,189][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-06-30 09:56:30,189][FINEST][302][                SessionCommitClosure.withContext()] Session is free, do not charge reservation, charge 0 on main account [reservationId=R42539077T1435658909433@16922380404922163~-9048415148037454697 subscriberId=42,539,077 accountId=42,539,078 currency=NZD]
[2015-06-30 09:56:30,190][FINEST][302][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-06-30 09:56:30,190][FINEST][302][                       SessionTicketImpl.newPart()] added part, parts: [[TicketPartImpl duration=0 segments=null data=0]]
[2015-06-30 09:56:30,190][FINEST][302][                   SessionTicketImpl.finalCommit()] About to write final tickets, segments are: [(SessionSegment [duration=0, feature=15, charges=null, count=1, transferredData=0, ratingGroup=0])]
[2015-06-30 09:56:30,194][ FINER][247][                          TicketSenderImpl$1.run()] Sending ticket to inew-cs.crce.cdr: 5.3|101|true|1|CRCE|CDR|crce01.tb13|2015-06-30T09:56:30.190+0000|2015-06-30T09:56:26.000+0000|5065700000|1|1|42539077|642041010000|PREPAID|ACTIVE||1|NONE|OK||1.2|FinalCommit|BasicSession|1|530052041010000|642041010000|false|642041010000|(network) bumblebee|Local (on-net)|Terminating||0||Voice|false|64278|(network) TNZ #8|2015-06-30T09:56:28.000+0000|0|36000|60000|0|0|0001ABFF0E|false|101001|15730641|101001|0|0|NZD|10000000|PREPAID|OK||
[2015-06-30 09:56:30,195][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=deleteContext execTime=1.057]
[2015-06-30 09:56:30,195][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Delete]
[2015-06-30 09:56:30,197][FINEST][302][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=commit execTime=177.642]
[2015-06-30 09:56:30,198][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Commit]
[2015-06-30 09:56:30,199][FINEST][302][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=CommitFinal]
[2015-06-30 09:56:30,199][  INFO][302][                     TraceInterceptorImpl.invoke()] commit(...): SessionCommitResponse [header=[sessionId=5065700000, sessionBeginTimeStamp=Tue Jun 30 09:56:26 UTC 2015, chargingType=REGULAR], responseCode=OK, reservationId=R42539077T1435658909433@16922380404922163~-9048415148037454697, accounts=[[accountId=42539078, amount=0, unitId=270]]] [178ms]
[2015-06-30 09:56:30,272][FINEST][389][     SubscriberPeerImpl.getSubscriberProfileById()] Reading subscriber profile by ID [subscriberId=42,539,077]
[2015-06-30 09:56:30,434][FINEST][389][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=42,539,077]
[2015-06-30 09:56:30,434][FINEST][389][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=42,539,077, msisdn=642041010000]
[2015-06-30 09:56:30,435][FINEST][389][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=42,539,077]
[2015-06-30 09:56:30,436][FINEST][389][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=42,539,077 msisdn=642041010000 imsi=530052041010000]