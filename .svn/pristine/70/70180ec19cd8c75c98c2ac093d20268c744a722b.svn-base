[2015-07-01 12:21:48,858][FINEST][389][   SubscriberPeerImpl.getSubscriberProfileByImsi()] Reading subscriber profile by IMSI [imsi=530052041010000]
[2015-07-01 12:21:49,122][FINEST][389][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:49,122][FINEST][389][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:49,123][FINEST][389][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:49,124][FINEST][389][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=43,458,920 msisdn=642041010000 imsi=530052041010000]
[2015-07-01 12:21:49,155][  INFO][809][                     TraceInterceptorImpl.invoke()] reserve(SessionReservationRequest [header=[sessionId=5069600000, sessionBeginTimeStamp=Wed Jul 01 12:21:48 UTC 2015, chargingType=REGULAR], trafficType=MFC, imsi=530052041010000, subscriberId=43458920, suppressNumber=false, startTime=Wed Jul 01 12:21:49 UTC 2015, duration=0, location=64278, roaming=false, bearerType=Voice, referenceNumber=0001ABFF0E, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010200, nadi=INTERNATIONAL], locationNumber=null, locationDetailedId=null])
[2015-07-01 12:21:49,341][FINEST][809][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:49,341][FINEST][809][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:49,341][FINEST][809][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:49,343][FINEST][809][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010200]
[2015-07-01 12:21:49,578][  FINE][809][                       ZonePeerImpl.matchWithMnp()] Number '642041010200' is HPLMN
[2015-07-01 12:21:49,584][FINEST][809][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=create execTime=5.734]
[2015-07-01 12:21:49,586][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Create]
[2015-07-01 12:21:49,586][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=CreateSession]
[2015-07-01 12:21:49,590][FINEST][809][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=2.884]
[2015-07-01 12:21:49,592][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:21:49,592][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:21:49,593][FINEST][809][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:21:49,593][ FINER][809][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/mfc
[2015-07-01 12:21:49,594][FINEST][809][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=43,458,920, reservation=InternalReservationImpl{id='R43458920T1435753609594@18289328442286~-6108883050097060469', subscriberId=43458920, expires=1435753609594, reservedAt=1435753309594, reservation=[]}]
[2015-07-01 12:21:49,594][FINEST][809][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,309,138, duration=60,000]
[2015-07-01 12:21:49,595][FINEST][809][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,369,138, duration=60,000]
[2015-07-01 12:21:49,595][ FINER][809][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000005
[2015-07-01 12:21:49,596][ FINER][809][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,117]
[2015-07-01 12:21:49,596][FINEST][809][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:21:49,596][ FINER][809][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-07-01 12:21:49,596][ FINER][809][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,117]
[2015-07-01 12:21:49,597][ FINER][809][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-07-01 12:21:49,597][FINEST][809][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=809]
[2015-07-01 12:21:49,598][FINEST][809][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=809]
[2015-07-01 12:21:49,598][FINEST][809][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.249]
[2015-07-01 12:21:49,599][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:21:49,599][FINEST][809][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=-374134857]
[2015-07-01 12:21:49,604][FINEST][809][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=4.176]
[2015-07-01 12:21:49,605][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:21:49,606][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:21:49,608][FINEST][809][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=reserve execTime=452.948]
[2015-07-01 12:21:49,608][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Reserve]
[2015-07-01 12:21:49,609][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMFC]
[2015-07-01 12:21:49,610][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveInitial]
[2015-07-01 12:21:49,611][FINEST][809][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMFCInitial]
[2015-07-01 12:21:49,612][  INFO][809][                     TraceInterceptorImpl.invoke()] reserve(...): SessionReservationResponse [sessionId=5069600000, responseCode=OK, reservationId=R43458920T1435753609594@18289328442286~-6108883050097060469, lastSegment=false, grantedTime=60000, accounts=[]] [456ms]
[2015-07-01 12:21:50,782][  INFO][840][                     TraceInterceptorImpl.invoke()] update(SessionUpdateReservationRequest [header=[sessionId=5069600000, sessionBeginTimeStamp=Wed Jul 01 12:21:48 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753609594@18289328442286~-6108883050097060469, trafficType=MFC, imsi=530052041010000, subscriberId=43458920, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010200, nadi=INTERNATIONAL], bearerType=Voice, startTime=Wed Jul 01 12:21:50 UTC 2015, duration=0, location=64278, roaming=false, referenceNumber=0001ABFF0E])
[2015-07-01 12:21:50,962][FINEST][840][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:50,963][FINEST][840][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:50,963][FINEST][840][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:50,964][FINEST][840][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010200]
[2015-07-01 12:21:51,271][  FINE][840][                       ZonePeerImpl.matchWithMnp()] Number '642041010200' is HPLMN
[2015-07-01 12:21:51,276][FINEST][840][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=4.339]
[2015-07-01 12:21:51,278][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:21:51,278][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:21:51,279][FINEST][840][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:21:51,279][ FINER][840][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/mfc
[2015-07-01 12:21:51,280][FINEST][840][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=43,458,920, reservation=InternalReservationImpl{id='R43458920T1435753611280@18291014572344~8623885047641035810', subscriberId=43458920, expires=1435753611280, reservedAt=1435753311280, reservation=[]}]
[2015-07-01 12:21:51,281][FINEST][840][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,310,072, duration=60,000]
[2015-07-01 12:21:51,281][FINEST][840][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,370,072, duration=60,000]
[2015-07-01 12:21:51,282][ FINER][840][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000005
[2015-07-01 12:21:51,282][ FINER][840][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,117]
[2015-07-01 12:21:51,282][FINEST][840][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:21:51,282][ FINER][840][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-07-01 12:21:51,283][ FINER][840][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,117]
[2015-07-01 12:21:51,283][ FINER][840][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=0, perPeriod=60000, currency=NZD
[2015-07-01 12:21:51,284][FINEST][840][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=840]
[2015-07-01 12:21:51,284][FINEST][840][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=840]
[2015-07-01 12:21:51,285][FINEST][840][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.276]
[2015-07-01 12:21:51,285][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:21:51,285][FINEST][840][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=1293704335]
[2015-07-01 12:21:51,291][FINEST][840][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=4.877]
[2015-07-01 12:21:51,292][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:21:51,293][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:21:51,296][FINEST][840][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=update execTime=513.524]
[2015-07-01 12:21:51,296][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Update]
[2015-07-01 12:21:51,297][FINEST][840][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=UpdateMFC]
[2015-07-01 12:21:51,298][  INFO][840][                     TraceInterceptorImpl.invoke()] update(...): SessionReservationResponse [sessionId=5069600000, responseCode=OK, reservationId=R43458920T1435753611280@18291014572344~8623885047641035810, lastSegment=false, grantedTime=60000, accounts=[]] [515ms]
[2015-07-01 12:21:51,796][  INFO][1268][                     TraceInterceptorImpl.invoke()] commit(SessionCommitRequest [header=[sessionId=5069600000, sessionBeginTimeStamp=Wed Jul 01 12:21:48 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753611280@18291014572344~8623885047641035810, finalCommit=true, usedTime=1000])
[2015-07-01 12:21:51,801][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=3.884]
[2015-07-01 12:21:51,820][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:21:51,820][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:21:51,821][  FINE][1268][                SessionCommitClosure.withContext()] try to commit reservation: R43458920T1435753611280@18291014572344~8623885047641035810
[2015-07-01 12:21:51,970][FINEST][1268][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:51,970][FINEST][1268][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:51,970][FINEST][1268][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:51,972][FINEST][1268][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=1,268]
[2015-07-01 12:21:51,976][FINEST][1268][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=1,268]
[2015-07-01 12:21:51,977][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=5.057]
[2015-07-01 12:21:51,977][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:21:51,978][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=6.148]
[2015-07-01 12:21:51,978][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:21:51,978][ FINER][1268][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:21:51,979][FINEST][1268][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:21:51,979][FINEST][1268][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=1,268]
[2015-07-01 12:21:51,981][FINEST][1268][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=1,268]
[2015-07-01 12:21:51,982][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.775]
[2015-07-01 12:21:51,982][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:21:51,983][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=3.726]
[2015-07-01 12:21:51,983][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:21:51,983][FINEST][1268][                SessionCommitClosure.withContext()] Session is free, do not charge reservation, charge 0 on main account [reservationId=R43458920T1435753611280@18291014572344~8623885047641035810 subscriberId=43,458,920 accountId=43,458,921 currency=NZD]
[2015-07-01 12:21:51,984][FINEST][1268][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:21:51,984][FINEST][1268][                       SessionTicketImpl.newPart()] added part, parts: [[TicketPartImpl duration=0 segments=null data=0]]
[2015-07-01 12:21:51,985][FINEST][1268][                   SessionTicketImpl.finalCommit()] About to write final tickets, segments are: [(SessionSegment [duration=0, feature=15, charges=null, count=1, transferredData=0, ratingGroup=0])]
[2015-07-01 12:21:51,990][ FINER][1266][                          TicketSenderImpl$1.run()] Sending ticket to inew-cs.crce.cdr: 5.3|101|true|1|CRCE|CDR|crce01.tb13|2015-07-01T12:21:51.984+0000|2015-07-01T12:21:48.000+0000|5069600000|1|1|43458920|642041010000|PREPAID|ACTIVE||1|NONE|OK||1.2|FinalCommit|BasicSession|1|530052041010000|642041010000|false|642041010200|(network) bumblebee|Local (on-net)|Forwarding||0||Voice|false|64278|(network) TNZ #8|2015-07-01T12:21:50.000+0000|0|1000|60000|0|0|0001ABFF0E|false|101001|15730641|101001|0|0|NZD|10000000|PREPAID|OK||
[2015-07-01 12:21:51,991][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=deleteContext execTime=1.162]
[2015-07-01 12:21:51,991][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Delete]
[2015-07-01 12:21:51,994][FINEST][1268][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=commit execTime=197.48]
[2015-07-01 12:21:51,994][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Commit]
[2015-07-01 12:21:51,995][FINEST][1268][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=CommitFinal]
[2015-07-01 12:21:51,995][  INFO][1268][                     TraceInterceptorImpl.invoke()] commit(...): SessionCommitResponse [header=[sessionId=5069600000, sessionBeginTimeStamp=Wed Jul 01 12:21:48 UTC 2015, chargingType=REGULAR], responseCode=OK, reservationId=R43458920T1435753611280@18291014572344~8623885047641035810, accounts=[[accountId=43458921, amount=0, unitId=270]]] [198ms]
[2015-07-01 12:21:52,065][FINEST][101][     SubscriberPeerImpl.getSubscriberProfileById()] Reading subscriber profile by ID [subscriberId=43,458,920]
[2015-07-01 12:21:52,250][FINEST][101][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:52,251][FINEST][101][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:52,251][FINEST][101][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:52,253][FINEST][101][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=43,458,920 msisdn=642041010000 imsi=530052041010000]