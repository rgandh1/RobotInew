[2015-07-01 12:18:54,312][FINEST][630][   SubscriberPeerImpl.getSubscriberProfileByImsi()] Reading subscriber profile by IMSI [imsi=530052041010000]
[2015-07-01 12:18:54,597][FINEST][630][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:18:54,597][FINEST][630][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:18:54,597][FINEST][630][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:18:54,599][FINEST][630][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=43,458,920 msisdn=642041010000 imsi=530052041010000]
[2015-07-01 12:18:54,632][  INFO][762][                     TraceInterceptorImpl.invoke()] reserve(SessionReservationRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], trafficType=MOC, imsi=530052041010000, subscriberId=43458920, suppressNumber=false, startTime=Wed Jul 01 12:18:54 UTC 2015, duration=0, location=64278, roaming=false, bearerType=Voice, referenceNumber=0001ABFF0E, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], locationNumber=null, locationDetailedId=null])
[2015-07-01 12:18:54,840][FINEST][762][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:18:54,841][FINEST][762][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:18:54,841][FINEST][762][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:18:54,842][FINEST][762][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-07-01 12:18:55,118][  FINE][762][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-07-01 12:18:55,123][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=create execTime=4.856]
[2015-07-01 12:18:55,124][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Create]
[2015-07-01 12:18:55,124][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=CreateSession]
[2015-07-01 12:18:55,127][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=1.909]
[2015-07-01 12:18:55,128][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:18:55,128][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:18:55,129][FINEST][762][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:18:55,129][ FINER][762][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/moc
[2015-07-01 12:18:55,129][FINEST][762][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=43,458,920, reservation=InternalReservationImpl{id='R43458920T1435753435129@18114863881401~4524538576300264150', subscriberId=43458920, expires=1435753435129, reservedAt=1435753135129, reservation=[]}]
[2015-07-01 12:18:55,130][FINEST][762][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,134,615, duration=60,000]
[2015-07-01 12:18:55,130][FINEST][762][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,194,615, duration=60,000]
[2015-07-01 12:18:55,130][ FINER][762][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000032
[2015-07-01 12:18:55,130][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:18:55,130][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:18:55,131][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:18:55,131][FINEST][762][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:55,131][ FINER][762][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:55,131][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=-1031999635]
[2015-07-01 12:18:55,131][FINEST][762][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=762]
[2015-07-01 12:18:55,134][FINEST][762][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=762]
[2015-07-01 12:18:55,135][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.196]
[2015-07-01 12:18:55,135][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:18:55,135][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.187]
[2015-07-01 12:18:55,136][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:18:55,136][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:55,136][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:18:55,137][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:18:55,137][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:18:55,137][ FINER][762][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:55,138][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,138][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:55,138][ FINER][762][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000033
[2015-07-01 12:18:55,138][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:18:55,139][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:18:55,139][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:18:55,139][FINEST][762][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:55,139][ FINER][762][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:55,140][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,140][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:55,140][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:18:55,140][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:18:55,141][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:18:55,141][ FINER][762][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:55,141][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,142][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:55,142][ FINER][762][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000034
[2015-07-01 12:18:55,142][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:18:55,142][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:18:55,143][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:18:55,143][FINEST][762][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:55,143][ FINER][762][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:55,143][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,144][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:55,144][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:18:55,144][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:18:55,144][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:18:55,145][ FINER][762][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:55,145][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,145][ FINER][762][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:55,145][ FINER][762][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000045
[2015-07-01 12:18:55,146][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:18:55,146][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:18:55,146][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:18:55,146][FINEST][762][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:55,147][ FINER][762][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:18:55,147][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,147][ FINER][762][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:18:55,148][FINEST][762][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:18:55,148][FINEST][762][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=762]
[2015-07-01 12:18:55,150][FINEST][762][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=762]
[2015-07-01 12:18:55,151][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.846]
[2015-07-01 12:18:55,152][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:18:55,152][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=3.927]
[2015-07-01 12:18:55,152][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:18:55,153][FINEST][762][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:18:55,153][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,154][FINEST][762][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:18:55,154][ FINER][762][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:18:55,154][FINEST][762][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:18:55,154][ FINER][762][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:18:55,155][ FINER][762][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:18:55,155][FINEST][762][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,155][FINEST][762][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:18:55,157][FINEST][762][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=762]
[2015-07-01 12:18:55,157][FINEST][762][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=762]
[2015-07-01 12:18:55,158][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.145]
[2015-07-01 12:18:55,158][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:18:55,158][ FINER][762][                      ReservationStoreImpl.share()] Sharing reservation [reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, subscriberId=43,458,920, reservation=[20000@43458921[270]]
[2015-07-01 12:18:55,159][FINEST][762][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=762]
[2015-07-01 12:18:55,164][FINEST][762][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=762]
[2015-07-01 12:18:55,164][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=5.451]
[2015-07-01 12:18:55,165][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:18:55,165][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=save execTime=6.415]
[2015-07-01 12:18:55,166][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=CreateReservation]
[2015-07-01 12:18:55,166][FINEST][762][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=-1031999635]
[2015-07-01 12:18:55,172][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=5.217]
[2015-07-01 12:18:55,173][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:18:55,174][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:18:55,177][FINEST][762][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=reserve execTime=544.701]
[2015-07-01 12:18:55,177][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Reserve]
[2015-07-01 12:18:55,178][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMOC]
[2015-07-01 12:18:55,179][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveInitial]
[2015-07-01 12:18:55,180][FINEST][762][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMOCInitial]
[2015-07-01 12:18:55,181][  INFO][762][                     TraceInterceptorImpl.invoke()] reserve(...): SessionReservationResponse [sessionId=5069400000, responseCode=OK, reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, lastSegment=false, grantedTime=60000, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [549ms]
[2015-07-01 12:18:56,340][  INFO][763][                     TraceInterceptorImpl.invoke()] update(SessionUpdateReservationRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, trafficType=MOC, imsi=530052041010000, subscriberId=43458920, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], bearerType=Voice, startTime=Wed Jul 01 12:18:56 UTC 2015, duration=0, location=64278, roaming=false, referenceNumber=0001ABFF0E])
[2015-07-01 12:18:56,521][FINEST][763][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:18:56,522][FINEST][763][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:18:56,522][FINEST][763][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:18:56,523][FINEST][763][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-07-01 12:18:56,692][  FINE][763][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-07-01 12:18:56,697][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=4.561]
[2015-07-01 12:18:56,698][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:18:56,699][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:18:56,700][FINEST][763][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:18:56,700][ FINER][763][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/moc
[2015-07-01 12:18:56,701][FINEST][763][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:18:56,701][FINEST][763][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=763]
[2015-07-01 12:18:56,704][FINEST][763][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=763]
[2015-07-01 12:18:56,705][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.465]
[2015-07-01 12:18:56,705][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:18:56,705][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=4.41]
[2015-07-01 12:18:56,706][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:18:56,706][FINEST][763][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:18:56,707][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=852376649]
[2015-07-01 12:18:56,707][FINEST][763][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=763]
[2015-07-01 12:18:56,710][FINEST][763][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=763]
[2015-07-01 12:18:56,710][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.247]
[2015-07-01 12:18:56,711][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:18:56,711][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.152]
[2015-07-01 12:18:56,711][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:18:56,712][ FINER][763][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:18:56,712][FINEST][763][            ReservationStoreImpl.getReservations()] Loading reservations from cache [subscriberId=43,458,920]
[2015-07-01 12:18:56,713][FINEST][763][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,136,026, duration=60,000]
[2015-07-01 12:18:56,713][FINEST][763][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,196,026, duration=60,000]
[2015-07-01 12:18:56,714][ FINER][763][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000032
[2015-07-01 12:18:56,714][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:18:56,714][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:18:56,714][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:18:56,715][FINEST][763][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:56,715][ FINER][763][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:56,715][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,715][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:56,716][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:18:56,716][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:18:56,716][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:18:56,716][ FINER][763][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:56,716][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,717][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:18:56,717][ FINER][763][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000033
[2015-07-01 12:18:56,717][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:18:56,717][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:18:56,718][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:18:56,718][FINEST][763][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:56,718][ FINER][763][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:56,718][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,719][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:56,719][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:18:56,719][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:18:56,719][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:18:56,719][ FINER][763][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:56,720][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,720][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:18:56,720][ FINER][763][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000034
[2015-07-01 12:18:56,720][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:18:56,721][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:18:56,721][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:18:56,721][FINEST][763][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:56,721][ FINER][763][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:56,721][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,722][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=true, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:56,722][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:18:56,722][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:18:56,722][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:18:56,723][ FINER][763][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:56,723][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,723][ FINER][763][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:18:56,723][ FINER][763][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000045
[2015-07-01 12:18:56,724][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:18:56,724][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:18:56,724][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:18:56,724][FINEST][763][                    CompiledRatingFilter.rateMoc()] Beginning of session, adding setup rating
[2015-07-01 12:18:56,724][ FINER][763][                                SessionRater.add()] Try rating: setup=true, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:18:56,725][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,725][  FINE][763][                      SpecialChargeAction.charge()] accountId=43,458,921 amount=20,000 proposal=true
[2015-07-01 12:18:56,725][FINEST][763][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:18:56,726][ FINER][763][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:18:56,726][FINEST][763][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:18:56,726][ FINER][763][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:18:56,726][ FINER][763][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:18:56,727][FINEST][763][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,727][FINEST][763][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:18:56,728][FINEST][763][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=763]
[2015-07-01 12:18:56,728][FINEST][763][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=763]
[2015-07-01 12:18:56,729][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.139]
[2015-07-01 12:18:56,729][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:18:56,730][FINEST][763][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=852376649]
[2015-07-01 12:18:56,735][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=5.213]
[2015-07-01 12:18:56,737][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:18:56,737][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:18:56,741][FINEST][763][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=update execTime=400.127]
[2015-07-01 12:18:56,741][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Update]
[2015-07-01 12:18:56,741][FINEST][763][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=UpdateMOC]
[2015-07-01 12:18:56,742][  INFO][763][                     TraceInterceptorImpl.invoke()] update(...): SessionReservationResponse [sessionId=5069400000, responseCode=OK, reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, lastSegment=false, grantedTime=60000, accounts=[]] [402ms]
[2015-07-01 12:19:23,770][FINEST][764][                   ProviderPeerImpl.getProviders()] return: [com.tryge.negret.profiler.services.ProviderType@657633b6, com.tryge.negret.profiler.services.ProviderType@333d25c4, com.tryge.negret.profiler.services.ProviderType@737a8123]
[2015-07-01 12:19:38,789][FINEST][764][                   ProviderPeerImpl.getProviders()] return: [com.tryge.negret.profiler.services.ProviderType@70d8ff31, com.tryge.negret.profiler.services.ProviderType@365a23d8, com.tryge.negret.profiler.services.ProviderType@57e755c8]
[2015-07-01 12:19:56,357][  INFO][771][                     TraceInterceptorImpl.invoke()] commit(SessionCommitRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, finalCommit=false, usedTime=60000])
[2015-07-01 12:19:56,363][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=5.074]
[2015-07-01 12:19:56,364][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:19:56,365][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:19:56,366][  FINE][771][                SessionCommitClosure.withContext()] try to commit reservation: R43458920T1435753435129@18114863881401~4524538576300264150
[2015-07-01 12:19:56,555][FINEST][771][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:19:56,555][FINEST][771][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:19:56,556][FINEST][771][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:19:56,557][FINEST][771][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:19:56,558][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,561][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:56,562][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=4.261]
[2015-07-01 12:19:56,562][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:19:56,563][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=5.441]
[2015-07-01 12:19:56,563][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:19:56,563][FINEST][771][                     ConsumeAction.commitPartial()] Partially commiting the reservation [subscriberId=43,458,920, reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, tuples=[20000@43458921[270]]]
[2015-07-01 12:19:56,564][FINEST][771][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:19:56,564][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=987467696]
[2015-07-01 12:19:56,565][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,568][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:56,568][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.521]
[2015-07-01 12:19:56,569][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:19:56,569][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.418]
[2015-07-01 12:19:56,569][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:19:56,569][ FINER][771][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:19:56,570][FINEST][771][            ReservationStoreImpl.getReservations()] Loading reservations from cache [subscriberId=43,458,920]
[2015-07-01 12:19:56,571][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,571][FINEST][771][                            AccountDaoImpl.flush()] Flushing account [id=43,458,921, balance=9,980,000]
[2015-07-01 12:19:56,574][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=flush execTime=2.413]
[2015-07-01 12:19:56,574][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Flush]
[2015-07-01 12:19:56,575][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.077]
[2015-07-01 12:19:56,575][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:19:56,577][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:56,578][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=6.985]
[2015-07-01 12:19:56,578][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:19:56,578][ FINER][771][                    ReservationStoreImpl.discard()] Discarding reservation [reservationId=R43458920T1435753435129@18114863881401~4524538576300264150]
[2015-07-01 12:19:56,579][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,582][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:56,582][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.723]
[2015-07-01 12:19:56,583][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:19:56,583][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=delete execTime=4.574]
[2015-07-01 12:19:56,583][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=DeleteReservation]
[2015-07-01 12:19:56,584][FINEST][771][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=987467696]
[2015-07-01 12:19:56,584][FINEST][771][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:19:56,584][  FINE][ 48][                  AccountChangeHook.eventOccured()] Received event: AccountChangeEvent [type=3, subscriberId=43458920, timestamp=1435753196584, transactionId=0f9a83c0-2e0f-46c5-9e0d-89b23d31855d]
[2015-07-01 12:19:56,585][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.datacontrol.impl.DataControlTimerListener
[2015-07-01 12:19:56,585][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.emergencyloan.service.impl.EmergencyLoanRepaymentAccountListener
[2015-07-01 12:19:56,585][  FINE][ 48][EmergencyLoanRepaymentAccountListener.accountChanged()] Received accountChanged event for account id 43,458,921
[2015-07-01 12:19:56,586][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.integration.diameter.impl.listeners.DiameterReauthAccountListener
[2015-07-01 12:19:56,586][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.accountlimit.AccountChangeLimitListener
[2015-07-01 12:19:56,586][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Checking account limit [subscriberId=43458920, remainingBalance=9980000]
[2015-07-01 12:19:56,587][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Account limit not set for subscriber [subscriberId=43458920]
[2015-07-01 12:19:56,587][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountExpiryNotificationListener
[2015-07-01 12:19:56,587][  INFO][ 48][AccountExpiryNotificationListener.isMainTopupOrChangedExpiry()] Balance or expiry changed evaluation result [isTopup=false, changedExpiry=false]
[2015-07-01 12:19:56,587][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountBalanceNotificationListener
[2015-07-01 12:19:56,587][FINEST][ 48][AccountBalanceNotificationListener.accountChanged()] Checking account notifications [subscriberId=43458920]
[2015-07-01 12:19:56,588][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_20_percent, currencyId=101,004]
[2015-07-01 12:19:56,588][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_used, currencyId=101,004]
[2015-07-01 12:19:56,589][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_20_percent, currencyId=101,003]
[2015-07-01 12:19:56,589][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_used, currencyId=101,003]
[2015-07-01 12:19:56,589][FINEST][ 48][                  AccountQuotaEvaluator.evaluate()] Notification conditions not met [subscriberId=43,458,920, notification=low_credit_05]
[2015-07-01 12:19:56,590][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_used, currencyGroup=DATA]
[2015-07-01 12:19:56,590][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_20_percent, currencyId=101,000]
[2015-07-01 12:19:56,591][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=rollover_data_quota_20mb, currencyId=101,006]
[2015-07-01 12:19:56,591][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_20mb, currencyId=4]
[2015-07-01 12:19:56,592][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_used, currencyId=6]
[2015-07-01 12:19:56,592][FINEST][771][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:19:56,593][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_20_percent, currencyId=6]
[2015-07-01 12:19:56,594][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_20_percent, currencyId=2]
[2015-07-01 12:19:56,595][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_used, currencyId=2]
[2015-07-01 12:19:56,595][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_used, currencyId=3]
[2015-07-01 12:19:56,596][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_used, currencyId=101,000]
[2015-07-01 12:19:56,596][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_20_percent, currencyId=3]
[2015-07-01 12:19:56,597][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.tariffs.service.TariffAccountListener
[2015-07-01 12:19:56,599][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=5.873]
[2015-07-01 12:19:56,600][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:19:56,601][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:19:56,604][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=commit execTime=246.738]
[2015-07-01 12:19:56,605][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Commit]
[2015-07-01 12:19:56,605][  INFO][771][                     TraceInterceptorImpl.invoke()] commit(...): SessionCommitResponse [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], responseCode=OK, reservationId=R43458920T1435753435129@18114863881401~4524538576300264150, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [247ms]
[2015-07-01 12:19:56,606][  INFO][771][                     TraceInterceptorImpl.invoke()] reserve(SessionReservationRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], trafficType=MOC, imsi=530052041010000, subscriberId=43458920, suppressNumber=false, startTime=Wed Jul 01 12:18:56 UTC 2015, duration=60000, location=64278, roaming=false, bearerType=Voice, referenceNumber=0001ABFF0E, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], locationNumber=null, locationDetailedId=null])
[2015-07-01 12:19:56,784][FINEST][771][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:19:56,784][FINEST][771][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:19:56,784][FINEST][771][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:19:56,786][FINEST][771][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-07-01 12:19:56,969][  FINE][771][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-07-01 12:19:56,975][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=4.782]
[2015-07-01 12:19:56,976][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:19:56,977][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:19:56,978][FINEST][771][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:19:56,978][ FINER][771][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/moc
[2015-07-01 12:19:56,978][FINEST][771][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=43,458,920, reservation=InternalReservationImpl{id='R43458920T1435753316978@18176713289027~-7432027366051175250', subscriberId=43458920, expires=1435753316978, reservedAt=1435753196978, reservation=[]}]
[2015-07-01 12:19:56,979][FINEST][771][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,196,026, duration=60,000]
[2015-07-01 12:19:56,980][FINEST][771][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,256,026, duration=60,000]
[2015-07-01 12:19:56,980][ FINER][771][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000032
[2015-07-01 12:19:56,980][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:19:56,981][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:19:56,981][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:19:56,981][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:19:56,981][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=1520447128]
[2015-07-01 12:19:56,982][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,985][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:56,985][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.587]
[2015-07-01 12:19:56,986][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:19:56,986][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.538]
[2015-07-01 12:19:56,986][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:19:56,987][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:19:56,987][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:19:56,987][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:19:56,988][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:19:56,988][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:19:56,988][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,988][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:19:56,989][ FINER][771][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000033
[2015-07-01 12:19:56,989][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:19:56,989][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:19:56,989][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:19:56,989][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:19:56,990][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,990][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:19:56,990][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:19:56,990][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:19:56,991][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:19:56,991][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:19:56,991][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,991][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:19:56,992][ FINER][771][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000034
[2015-07-01 12:19:56,992][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:19:56,992][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:19:56,992][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:19:56,993][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:19:56,993][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,993][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:19:56,993][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:19:56,993][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:19:56,994][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:19:56,994][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:19:56,994][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,994][ FINER][771][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:19:56,995][ FINER][771][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000045
[2015-07-01 12:19:56,995][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:19:56,995][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:19:56,995][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:19:56,996][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:19:56,996][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:56,996][ FINER][771][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:19:56,996][FINEST][771][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:19:56,997][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:56,999][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:57,000][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.948]
[2015-07-01 12:19:57,000][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:19:57,001][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=3.945]
[2015-07-01 12:19:57,001][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:19:57,002][FINEST][771][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:19:57,002][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:57,002][FINEST][771][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:19:57,003][ FINER][771][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:19:57,003][FINEST][771][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:19:57,003][ FINER][771][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:19:57,003][ FINER][771][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:19:57,004][FINEST][771][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:57,004][FINEST][771][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:19:57,005][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:57,006][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:57,006][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.115]
[2015-07-01 12:19:57,007][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:19:57,007][ FINER][771][                      ReservationStoreImpl.share()] Sharing reservation [reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250, subscriberId=43,458,920, reservation=[20000@43458921[270]]
[2015-07-01 12:19:57,008][FINEST][771][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=771]
[2015-07-01 12:19:57,012][FINEST][771][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=771]
[2015-07-01 12:19:57,013][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=5.569]
[2015-07-01 12:19:57,013][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:19:57,014][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=save execTime=6.444]
[2015-07-01 12:19:57,014][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=CreateReservation]
[2015-07-01 12:19:57,014][FINEST][771][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=1520447128]
[2015-07-01 12:19:57,022][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=7.083]
[2015-07-01 12:19:57,023][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:19:57,024][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:19:57,028][FINEST][771][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=reserve execTime=421.246]
[2015-07-01 12:19:57,028][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Reserve]
[2015-07-01 12:19:57,028][FINEST][771][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMOC]
[2015-07-01 12:19:57,031][  INFO][771][                     TraceInterceptorImpl.invoke()] reserve(...): SessionReservationResponse [sessionId=5069400000, responseCode=OK, reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250, lastSegment=false, grantedTime=60000, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [424ms]
[2015-07-01 12:20:21,404][FINEST][102][         SubscriberPeerImpl.getSubscriberProfile()] Reading subscriber profile by MSISDN [msisdn=null]
[2015-07-01 12:20:21,405][SEVERE][102][                SubscriberPeerImpl.getSubscriber()] unexpected exception: 
java.lang.NullPointerException: value is null
	at com.tryge.negret.profiler.impl.SubscriberPeerImpl.validateFormat(SubscriberPeerImpl.java:271)
	at com.tryge.negret.profiler.impl.SubscriberPeerImpl.getSubscriberProfileInternal(SubscriberPeerImpl.java:100)
	at com.tryge.negret.profiler.impl.SubscriberPeerImpl.getSubscriberByMsisdn(SubscriberPeerImpl.java:567)
	at com.tryge.negret.api.subscribers.SubscriberPeer$pbryglu.getSubscriberByMsisdn(Unknown Source)
	at com.tryge.negret.profiler.ws.impl.SubscriberPeerImpl$1.execute(SubscriberPeerImpl.java:292)
	at com.tryge.negret.profiler.ws.impl.SubscriberPeerImpl.getSubscriber(SubscriberPeerImpl.java:251)
	at com.tryge.negret.profiler.ws.impl.SubscriberPeerImpl.getSubscriberProfile(SubscriberPeerImpl.java:287)
	at sun.reflect.GeneratedMethodAccessor534.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.jboss.remoting.transporter.TransporterHandler.invoke(TransporterHandler.java:87)
	at org.jboss.remoting.ServerInvoker.invoke(ServerInvoker.java:897)
	at org.jboss.remoting.transport.socket.ServerThread.completeInvocation(ServerThread.java:768)
	at org.jboss.remoting.transport.socket.ServerThread.processInvocation(ServerThread.java:721)
	at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:548)
	at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:234)
[2015-07-01 12:20:21,405][FINEST][102][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=UnknownError subscriberId=0 msisdn=null imsi=null]
[2015-07-01 12:20:23,770][FINEST][764][                   ProviderPeerImpl.getProviders()] return: [com.tryge.negret.profiler.services.ProviderType@4598be05, com.tryge.negret.profiler.services.ProviderType@2ee35df5, com.tryge.negret.profiler.services.ProviderType@512d97df]
[2015-07-01 12:20:38,788][FINEST][764][                   ProviderPeerImpl.getProviders()] return: [com.tryge.negret.profiler.services.ProviderType@16ef8b5, com.tryge.negret.profiler.services.ProviderType@1c8a33cf, com.tryge.negret.profiler.services.ProviderType@354f69ac]
[2015-07-01 12:20:57,188][  INFO][776][                     TraceInterceptorImpl.invoke()] commit(SessionCommitRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250, finalCommit=false, usedTime=120000])
[2015-07-01 12:20:57,195][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=6.252]
[2015-07-01 12:20:57,197][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:20:57,198][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:20:57,199][  FINE][776][                SessionCommitClosure.withContext()] try to commit reservation: R43458920T1435753316978@18176713289027~-7432027366051175250
[2015-07-01 12:20:57,359][FINEST][776][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:20:57,359][FINEST][776][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:20:57,361][FINEST][776][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:20:57,363][FINEST][776][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:20:57,363][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,366][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,367][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.413]
[2015-07-01 12:20:57,367][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:20:57,367][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=4.375]
[2015-07-01 12:20:57,368][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:20:57,368][FINEST][776][                     ConsumeAction.commitPartial()] Partially commiting the reservation [subscriberId=43,458,920, reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250, tuples=[20000@43458921[270]]]
[2015-07-01 12:20:57,369][FINEST][776][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:20:57,369][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=767575913]
[2015-07-01 12:20:57,370][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,372][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,373][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.203]
[2015-07-01 12:20:57,373][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:20:57,373][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.115]
[2015-07-01 12:20:57,374][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:20:57,374][ FINER][776][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:20:57,374][FINEST][776][            ReservationStoreImpl.getReservations()] Loading reservations from cache [subscriberId=43,458,920]
[2015-07-01 12:20:57,376][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,376][FINEST][776][                            AccountDaoImpl.flush()] Flushing account [id=43,458,921, balance=9,960,000]
[2015-07-01 12:20:57,378][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=flush execTime=2.088]
[2015-07-01 12:20:57,378][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Flush]
[2015-07-01 12:20:57,379][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.775]
[2015-07-01 12:20:57,379][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:20:57,382][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,382][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=6.669]
[2015-07-01 12:20:57,383][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:20:57,383][ FINER][776][                    ReservationStoreImpl.discard()] Discarding reservation [reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250]
[2015-07-01 12:20:57,383][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,386][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,387][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.695]
[2015-07-01 12:20:57,387][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:20:57,388][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=delete execTime=4.658]
[2015-07-01 12:20:57,388][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=DeleteReservation]
[2015-07-01 12:20:57,388][FINEST][776][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=767575913]
[2015-07-01 12:20:57,389][  FINE][ 48][                  AccountChangeHook.eventOccured()] Received event: AccountChangeEvent [type=3, subscriberId=43458920, timestamp=1435753257388, transactionId=e82eb1b4-feff-476d-9604-cefa86b8bb06]
[2015-07-01 12:20:57,389][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.datacontrol.impl.DataControlTimerListener
[2015-07-01 12:20:57,389][FINEST][776][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:20:57,389][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.emergencyloan.service.impl.EmergencyLoanRepaymentAccountListener
[2015-07-01 12:20:57,390][  FINE][ 48][EmergencyLoanRepaymentAccountListener.accountChanged()] Received accountChanged event for account id 43,458,921
[2015-07-01 12:20:57,390][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.integration.diameter.impl.listeners.DiameterReauthAccountListener
[2015-07-01 12:20:57,390][FINEST][776][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:20:57,391][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.accountlimit.AccountChangeLimitListener
[2015-07-01 12:20:57,392][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Checking account limit [subscriberId=43458920, remainingBalance=9960000]
[2015-07-01 12:20:57,392][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Account limit not set for subscriber [subscriberId=43458920]
[2015-07-01 12:20:57,392][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountExpiryNotificationListener
[2015-07-01 12:20:57,393][  INFO][ 48][AccountExpiryNotificationListener.isMainTopupOrChangedExpiry()] Balance or expiry changed evaluation result [isTopup=false, changedExpiry=false]
[2015-07-01 12:20:57,393][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountBalanceNotificationListener
[2015-07-01 12:20:57,393][FINEST][ 48][AccountBalanceNotificationListener.accountChanged()] Checking account notifications [subscriberId=43458920]
[2015-07-01 12:20:57,394][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_20_percent, currencyId=101,004]
[2015-07-01 12:20:57,394][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_used, currencyId=101,004]
[2015-07-01 12:20:57,395][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_20_percent, currencyId=101,003]
[2015-07-01 12:20:57,395][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_used, currencyId=101,003]
[2015-07-01 12:20:57,396][FINEST][ 48][                  AccountQuotaEvaluator.evaluate()] Notification conditions not met [subscriberId=43,458,920, notification=low_credit_05]
[2015-07-01 12:20:57,396][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_used, currencyGroup=DATA]
[2015-07-01 12:20:57,397][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_20_percent, currencyId=101,000]
[2015-07-01 12:20:57,397][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=rollover_data_quota_20mb, currencyId=101,006]
[2015-07-01 12:20:57,398][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_20mb, currencyId=4]
[2015-07-01 12:20:57,399][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_used, currencyId=6]
[2015-07-01 12:20:57,398][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=6.639]
[2015-07-01 12:20:57,399][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_20_percent, currencyId=6]
[2015-07-01 12:20:57,400][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_20_percent, currencyId=2]
[2015-07-01 12:20:57,401][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_used, currencyId=2]
[2015-07-01 12:20:57,401][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_used, currencyId=3]
[2015-07-01 12:20:57,401][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_used, currencyId=101,000]
[2015-07-01 12:20:57,400][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:20:57,402][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_20_percent, currencyId=3]
[2015-07-01 12:20:57,402][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:20:57,403][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.tariffs.service.TariffAccountListener
[2015-07-01 12:20:57,406][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=commit execTime=216.857]
[2015-07-01 12:20:57,406][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Commit]
[2015-07-01 12:20:57,407][  INFO][776][                     TraceInterceptorImpl.invoke()] commit(...): SessionCommitResponse [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], responseCode=OK, reservationId=R43458920T1435753316978@18176713289027~-7432027366051175250, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [217ms]
[2015-07-01 12:20:57,407][  INFO][776][                     TraceInterceptorImpl.invoke()] reserve(SessionReservationRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], trafficType=MOC, imsi=530052041010000, subscriberId=43458920, suppressNumber=false, startTime=Wed Jul 01 12:18:56 UTC 2015, duration=120000, location=64278, roaming=false, bearerType=Voice, referenceNumber=0001ABFF0E, callingParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], calledParty=Address [msisdn=642041010000, nadi=INTERNATIONAL], locationNumber=null, locationDetailedId=null])
[2015-07-01 12:20:57,504][FINEST][776][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:20:57,505][FINEST][776][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:20:57,505][FINEST][776][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:20:57,506][FINEST][776][     LocalNumberPortabilityService.getNumberInfo()] Performing local MNP query [msisdn=642041010000]
[2015-07-01 12:20:57,662][  FINE][776][                       ZonePeerImpl.matchWithMnp()] Number '642041010000' is HPLMN
[2015-07-01 12:20:57,668][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=5.292]
[2015-07-01 12:20:57,669][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:20:57,670][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:20:57,671][FINEST][776][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:20:57,671][ FINER][776][                    RateplanPeerImpl.getRateplan()] Getting the rateplan for key: ptk.skinny/101001/moc
[2015-07-01 12:20:57,672][FINEST][776][                     ReservationStoreImpl.create()] Creating a reservation [subscriberId=43,458,920, reservation=InternalReservationImpl{id='R43458920T1435753377672@18237406492889~-9156075102973724', subscriberId=43458920, expires=1435753377672, reservedAt=1435753257672, reservation=[]}]
[2015-07-01 12:20:57,672][FINEST][776][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,256,026, duration=60,000]
[2015-07-01 12:20:57,673][FINEST][776][                             SessionRater.<init>()] Initialized session rater [subscriberId=43,458,920, offset=1,435,753,316,026, duration=60,000]
[2015-07-01 12:20:57,673][ FINER][776][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000032
[2015-07-01 12:20:57,674][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:20:57,674][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:20:57,674][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:20:57,674][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:20:57,675][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=338875314]
[2015-07-01 12:20:57,675][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,679][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,680][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=4.571]
[2015-07-01 12:20:57,680][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:20:57,680][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=5.532]
[2015-07-01 12:20:57,681][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:20:57,681][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:20:57,681][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000790
[2015-07-01 12:20:57,682][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,791
[2015-07-01 12:20:57,682][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,791]
[2015-07-01 12:20:57,682][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:20:57,682][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,683][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Skinny Mins
[2015-07-01 12:20:57,683][ FINER][776][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000033
[2015-07-01 12:20:57,683][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:20:57,683][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:20:57,683][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:20:57,684][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:20:57,684][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,684][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:20:57,684][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000798
[2015-07-01 12:20:57,685][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,799
[2015-07-01 12:20:57,685][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,799]
[2015-07-01 12:20:57,685][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:20:57,685][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,686][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=Minutes
[2015-07-01 12:20:57,686][ FINER][776][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000034
[2015-07-01 12:20:57,686][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:20:57,686][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:20:57,686][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:20:57,687][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:20:57,687][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,687][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:20:57,687][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010000814
[2015-07-01 12:20:57,688][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,000,815
[2015-07-01 12:20:57,688][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,000,815]
[2015-07-01 12:20:57,688][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:20:57,688][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,689][ FINER][776][                               SessionRater.rate()] Failed to charge rating: setup=false, begin=0, duration=0, price=1, perPeriod=60000, currency=NZ and AU Mins
[2015-07-01 12:20:57,689][ FINER][776][      BasicSessionFeatureFactoryImpl.newInstance()] Executing session feature: 1010010000045
[2015-07-01 12:20:57,689][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:20:57,689][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:20:57,690][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:20:57,690][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:20:57,690][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,690][ FINER][776][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:20:57,690][FINEST][776][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:20:57,691][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,693][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,694][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=2.959]
[2015-07-01 12:20:57,694][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:20:57,695][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=3.878]
[2015-07-01 12:20:57,695][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:20:57,696][FINEST][776][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:20:57,696][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,696][FINEST][776][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:20:57,697][ FINER][776][                  CompiledDestinationFilter.rate()] Executing destination filter: id=1010010001094
[2015-07-01 12:20:57,697][FINEST][776][                  CompiledDestinationFilter.rate()] Destination zone=Zone [id=1, info=(network) bumblebee, name=Local (on-net), numberPrefix=64204] -> next filter: id=1,010,010,001,095
[2015-07-01 12:20:57,697][ FINER][776][                    CompiledRatingFilter.rateMoc()] Executing rating filter for session request [filterId=1,010,010,001,095]
[2015-07-01 12:20:57,697][ FINER][776][                                SessionRater.add()] Try rating: setup=false, begin=0, duration=0, price=20000, perPeriod=60000, currency=NZD
[2015-07-01 12:20:57,698][FINEST][776][                AccountStoreImpl.loadDescriptors()] Loading descriptors from cache [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,698][FINEST][776][                          AccountListImpl.charge()] Charging attempt succeeded [requestedCharge=20,000, accountId=43,458,921, available=20,000]
[2015-07-01 12:20:57,699][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,700][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,700][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=1.47]
[2015-07-01 12:20:57,701][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:20:57,701][ FINER][776][                      ReservationStoreImpl.share()] Sharing reservation [reservationId=R43458920T1435753377672@18237406492889~-9156075102973724, subscriberId=43,458,920, reservation=[20000@43458921[270]]
[2015-07-01 12:20:57,702][FINEST][776][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=776]
[2015-07-01 12:20:57,707][FINEST][776][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=776]
[2015-07-01 12:20:57,707][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=5.329]
[2015-07-01 12:20:57,708][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:20:57,708][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=save execTime=6.289]
[2015-07-01 12:20:57,708][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=CreateReservation]
[2015-07-01 12:20:57,708][FINEST][776][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=338875314]
[2015-07-01 12:20:57,717][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=updateContext execTime=7.969]
[2015-07-01 12:20:57,718][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Update]
[2015-07-01 12:20:57,719][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=UpdateSession]
[2015-07-01 12:20:57,722][FINEST][776][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=reserve execTime=314.273]
[2015-07-01 12:20:57,722][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Reserve]
[2015-07-01 12:20:57,723][FINEST][776][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=ReserveMOC]
[2015-07-01 12:20:57,725][  INFO][776][                     TraceInterceptorImpl.invoke()] reserve(...): SessionReservationResponse [sessionId=5069400000, responseCode=OK, reservationId=R43458920T1435753377672@18237406492889~-9156075102973724, lastSegment=false, grantedTime=60000, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [317ms]
[2015-07-01 12:20:57,916][SEVERE][212][                    DatabaseContextSharing.clean()] unexpected exception during cleanup: 
java.lang.RuntimeException: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 241
	at com.inewcs.crce.contextsharing.db.dialect.Utils.deserializeString(Utils.java:141)
	at com.inewcs.crce.contextsharing.db.dialect.AbstractDbDialect.createContextFromResultSet(AbstractDbDialect.java:183)
	at com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing.clean(DatabaseContextSharing.java:450)
	at com.tryge.negret.proc.impl.CleanerImpl$1$1.run(CleanerImpl.java:70)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)
Caused by: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 241
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.Gson.fromJson(Gson.java:795)
	at com.google.gson.Gson.fromJson(Gson.java:761)
	at com.google.gson.Gson.fromJson(Gson.java:710)
	at com.google.gson.Gson.fromJson(Gson.java:682)
	at com.inewcs.crce.contextsharing.db.dialect.Utils.deserializeString(Utils.java:137)
	... 6 more
Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 241
	at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
	at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
	... 15 more
[2015-07-01 12:21:13,936][  INFO][780][                     TraceInterceptorImpl.invoke()] commit(SessionCommitRequest [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], reservationId=R43458920T1435753377672@18237406492889~-9156075102973724, finalCommit=true, usedTime=136000])
[2015-07-01 12:21:13,943][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=selectContext execTime=6.354]
[2015-07-01 12:21:13,945][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Select]
[2015-07-01 12:21:13,945][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=SelectSession]
[2015-07-01 12:21:13,946][  FINE][780][                SessionCommitClosure.withContext()] try to commit reservation: R43458920T1435753377672@18237406492889~-9156075102973724
[2015-07-01 12:21:14,306][FINEST][780][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:14,306][FINEST][780][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:14,307][FINEST][780][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:14,311][FINEST][780][            ReservationStoreImpl.getReservations()] Loading all reservations from database [subscriberId=43,458,920]
[2015-07-01 12:21:14,311][FINEST][780][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=780]
[2015-07-01 12:21:14,316][FINEST][780][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=780]
[2015-07-01 12:21:14,316][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=4.938]
[2015-07-01 12:21:14,316][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:21:14,317][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=getBySubscriber execTime=5.864]
[2015-07-01 12:21:14,317][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=SelectReservation]
[2015-07-01 12:21:14,318][FINEST][780][                     ConsumeAction.commitPartial()] Partially commiting the reservation [subscriberId=43,458,920, reservationId=R43458920T1435753377672@18237406492889~-9156075102973724, tuples=[20000@43458921[270]]]
[2015-07-01 12:21:14,318][FINEST][780][                        AccountStoreImpl.getById()] Loading the account by id [subscriberId=43,458,920, accountId=43,458,921]
[2015-07-01 12:21:14,318][FINEST][780][                AccountStoreImpl.loadDescriptors()] Loading descriptors from database [subscriberId=43,458,920, actionId=2029846685]
[2015-07-01 12:21:14,319][FINEST][780][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=780]
[2015-07-01 12:21:14,322][FINEST][780][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=780]
[2015-07-01 12:21:14,323][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.813]
[2015-07-01 12:21:14,323][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:21:14,323][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=loadDescriptors execTime=4.683]
[2015-07-01 12:21:14,323][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Lookup]
[2015-07-01 12:21:14,324][ FINER][780][                     AbstractAccountManager.load()] Loading acount from descriptor [accountId=43,458,921, subscriberId=43,458,920]
[2015-07-01 12:21:14,324][FINEST][780][            ReservationStoreImpl.getReservations()] Loading reservations from cache [subscriberId=43,458,920]
[2015-07-01 12:21:14,325][FINEST][780][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=780]
[2015-07-01 12:21:14,326][FINEST][780][                            AccountDaoImpl.flush()] Flushing account [id=43,458,921, balance=9,940,000]
[2015-07-01 12:21:14,328][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.AccountDaoImpl method=flush execTime=2.388]
[2015-07-01 12:21:14,329][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=Flush]
[2015-07-01 12:21:14,329][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=3.079]
[2015-07-01 12:21:14,329][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:21:14,332][FINEST][780][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=780]
[2015-07-01 12:21:14,332][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=7.173]
[2015-07-01 12:21:14,333][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Write]
[2015-07-01 12:21:14,333][ FINER][780][                    ReservationStoreImpl.discard()] Discarding reservation [reservationId=R43458920T1435753377672@18237406492889~-9156075102973724]
[2015-07-01 12:21:14,334][FINEST][780][                  TransactionalQueryExecutor.run()] Opening a new database transaction [thread=780]
[2015-07-01 12:21:14,340][FINEST][780][                  TransactionalQueryExecutor.run()] Committed the transaction [thread=780]
[2015-07-01 12:21:14,340][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.tryge.negret.db.impl.TransactionalQueryExecutor method=execute execTime=6.423]
[2015-07-01 12:21:14,340][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=CoreDB name=Read]
[2015-07-01 12:21:14,341][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.accounting.persistence.impl.ReservationDaoImpl method=delete execTime=7.297]
[2015-07-01 12:21:14,341][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Accounting name=DeleteReservation]
[2015-07-01 12:21:14,341][FINEST][780][                AccountStoreImpl.releaseAccounts()] Releasing the cached accounts for subscriber [subscriberId=43458920, actionId=2029846685]
[2015-07-01 12:21:14,341][  FINE][ 48][                  AccountChangeHook.eventOccured()] Received event: AccountChangeEvent [type=3, subscriberId=43458920, timestamp=1435753274341, transactionId=d52bc53a-8ac8-484e-986a-6c205cbee18a]
[2015-07-01 12:21:14,342][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.datacontrol.impl.DataControlTimerListener
[2015-07-01 12:21:14,342][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.emergencyloan.service.impl.EmergencyLoanRepaymentAccountListener
[2015-07-01 12:21:14,342][FINEST][780][                 SessionContext.getCommitActions()] Reading commit actions: []
[2015-07-01 12:21:14,343][  FINE][ 48][EmergencyLoanRepaymentAccountListener.accountChanged()] Received accountChanged event for account id 43,458,921
[2015-07-01 12:21:14,343][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.integration.diameter.impl.listeners.DiameterReauthAccountListener
[2015-07-01 12:21:14,343][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.accountlimit.AccountChangeLimitListener
[2015-07-01 12:21:14,344][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Checking account limit [subscriberId=43458920, remainingBalance=9940000]
[2015-07-01 12:21:14,344][FINEST][ 48][       AccountChangeLimitListener.accountChanged()] Account limit not set for subscriber [subscriberId=43458920]
[2015-07-01 12:21:14,344][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountExpiryNotificationListener
[2015-07-01 12:21:14,344][  INFO][ 48][AccountExpiryNotificationListener.isMainTopupOrChangedExpiry()] Balance or expiry changed evaluation result [isTopup=false, changedExpiry=false]
[2015-07-01 12:21:14,345][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.plugins.notifications.accounts.AccountBalanceNotificationListener
[2015-07-01 12:21:14,345][FINEST][ 48][AccountBalanceNotificationListener.accountChanged()] Checking account notifications [subscriberId=43458920]
[2015-07-01 12:21:14,345][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_20_percent, currencyId=101,004]
[2015-07-01 12:21:14,346][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_minutes_used, currencyId=101,004]
[2015-07-01 12:21:14,346][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_20_percent, currencyId=101,003]
[2015-07-01 12:21:14,346][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_au_texts_used, currencyId=101,003]
[2015-07-01 12:21:14,347][FINEST][ 48][                  AccountQuotaEvaluator.evaluate()] Notification conditions not met [subscriberId=43,458,920, notification=low_credit_05]
[2015-07-01 12:21:14,348][FINEST][780][                       SessionTicketImpl.newPart()] added part, parts: [[TicketPartImpl duration=0 segments=null data=0]]
[2015-07-01 12:21:14,348][FINEST][780][                   SessionTicketImpl.finalCommit()] About to write final tickets, segments are: [(SessionSegment [duration=0, feature=15, charges=null, count=1, transferredData=0, ratingGroup=-2147483648])]
[2015-07-01 12:21:14,348][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_used, currencyGroup=DATA]
[2015-07-01 12:21:14,349][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_20_percent, currencyId=101,000]
[2015-07-01 12:21:14,350][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=rollover_data_quota_20mb, currencyId=101,006]
[2015-07-01 12:21:14,350][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=data_quota_20mb, currencyId=4]
[2015-07-01 12:21:14,351][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_used, currencyId=6]
[2015-07-01 12:21:14,352][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_minutes_20_percent, currencyId=6]
[2015-07-01 12:21:14,352][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_20_percent, currencyId=2]
[2015-07-01 12:21:14,353][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_minutes_used, currencyId=2]
[2015-07-01 12:21:14,353][ FINER][1263][                          TicketSenderImpl$1.run()] Sending ticket to inew-cs.crce.cdr: 5.3|101|true|1|CRCE|CDR|crce01.tb13|2015-07-01T12:21:14.347+0000|2015-07-01T12:18:54.000+0000|5069400000|1|1|43458920|642041010000|PREPAID|ACTIVE||1|NONE|OK||1.2|FinalCommit|BasicSession|1|530052041010000|642041010000|false|642041010000|(network) bumblebee|Local (on-net)|Originating||||Voice|false|64278|(network) TNZ #8|2015-07-01T12:18:56.000+0000|0|136000|180000|0|0|0001ABFF0E|false|101001|15730641|101001|60000|60000|NZD|9940000|PREPAID|OK||
[2015-07-01 12:21:14,353][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_used, currencyId=3]
[2015-07-01 12:21:14,354][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=skinny_texts_used, currencyId=101,000]
[2015-07-01 12:21:14,354][FINEST][ 48][                   AccountQuotaEvaluator.applies()] Notification not applicable for the currency [notification=nz_texts_20_percent, currencyId=3]
[2015-07-01 12:21:14,355][FINEST][ 48][                  AccountChangeHook.eventOccured()] Calling listener for account change: com.inewcs.crce.tariffs.service.TariffAccountListener
[2015-07-01 12:21:14,356][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.contextsharing.db.impl.DatabaseContextSharing method=deleteContext execTime=0.99]
[2015-07-01 12:21:14,357][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=ContextDB name=Delete]
[2015-07-01 12:21:14,360][FINEST][780][            MonitorListenerImpl.methodInvocation()] Monitoring event received [class=com.inewcs.crce.apps.session.impl.SessionApplicationImpl method=commit execTime=422.827]
[2015-07-01 12:21:14,360][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=Commit]
[2015-07-01 12:21:14,361][FINEST][780][            MonitorListenerImpl.handleInvocation()] Condition OK, process monitoring event [group=Session name=CommitFinal]
[2015-07-01 12:21:14,361][  INFO][780][                     TraceInterceptorImpl.invoke()] commit(...): SessionCommitResponse [header=[sessionId=5069400000, sessionBeginTimeStamp=Wed Jul 01 12:18:54 UTC 2015, chargingType=REGULAR], responseCode=OK, reservationId=R43458920T1435753377672@18237406492889~-9156075102973724, accounts=[[accountId=43458921, amount=20000, unitId=270]]] [424ms]
[2015-07-01 12:21:14,465][FINEST][101][     SubscriberPeerImpl.getSubscriberProfileById()] Reading subscriber profile by ID [subscriberId=43,458,920]
[2015-07-01 12:21:14,660][FINEST][101][                         LifeCycleResolver.touch()] Checking subsriber state transitions [subscriberId=43,458,920]
[2015-07-01 12:21:14,661][FINEST][101][                     CountersFacetResolver.touch()] Checking if there are counters to delete [subscriberId=43,458,920, msisdn=642041010000]
[2015-07-01 12:21:14,661][FINEST][101][                  TariffSubscriberListener.touch()] Checking subscribers tariff state [subscriberId=43,458,920]
[2015-07-01 12:21:14,662][FINEST][101][                SubscriberPeerImpl.getSubscriber()] Subscriber lookup returned [resultCode=OK subscriberId=43,458,920 msisdn=642041010000 imsi=530052041010000]
[2015-07-01 12:21:23,770][FINEST][764][                   ProviderPeerImpl.getProviders()] return: [com.tryge.negret.profiler.services.ProviderType@6eef67b0, com.tryge.negret.profiler.services.ProviderType@27808cb6, com.tryge.negret.profiler.services.ProviderType@689614fc]